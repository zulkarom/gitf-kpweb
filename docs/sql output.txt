
SELECT `a`.`id`, `a`.`user_id`, `a`.`last_status_daftar`, `a`.`matric_no`, `a`.`nric`, `a`.`date_birth`, `a`.`gender`, `a`.`marital_status`, `a`.`nationality`, `a`.`citizenship`, `a`.`program_id`, `a`.`field_id`, `a`.`study_mode`, `a`.`address`, `a`.`city`, `a`.`phone_no`, `a`.`personal_email`, `a`.`religion`, `a`.`race`, `a`.`bachelor_name`, `a`.`bachelor_university`, `a`.`bachelor_cgpa`, `a`.`bachelor_year`, `a`.`admission_semester`, `a`.`admission_year`, `a`.`admission_date`, `a`.`sponsor`, `a`.`current_sem`, `a`.`campus_id`, `a`.`remark`, `a`.`outstanding_fee`, `a`.`related_university_id`, `a`.`master_name`, `a`.`master_university`, `a`.`master_cgpa`, `a`.`master_year`, `a`.`created_at`, `a`.`updated_at`, `a`.`program_code`, `a`.`study_mode_rc`, `a`.`field_code`, `a`.`cgpa_admission`, `a`.`spm_result`, `a`.`english_test`, `a`.`study_offer_condition`, `r`.`status_daftar` AS `status_daftar`, `r`.`status_aktif` AS `status_aktif`, (SELECT NULLIF(COALESCE(rs.stage_abbr, rs.stage_name), '') FROM pg_student_stage s INNER JOIN pg_res_stage rs ON rs.id = s.stage_id WHERE s.student_id = a.id ORDER BY s.semester_id DESC, s.id DESC LIMIT 1) AS `latest_stage`, (SELECT s.semester_id FROM pg_student_stage s WHERE s.student_id = a.id ORDER BY s.semester_id DESC, s.id DESC LIMIT 1) AS `latest_stage_semester` FROM `pg_student` `a` LEFT JOIN `user` ON `a`.`user_id` = `user`.`id` LEFT JOIN `sp_program` `program` ON `a`.`program_id` = `program`.`id` INNER JOIN `pg_student_reg` `r` ON r.student_id = a.id AND r.semester_id = 202520261 WHERE `a`.`study_mode_rc`='research' ORDER BY `a`.`id` DESC